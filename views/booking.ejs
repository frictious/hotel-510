<%- include ("partials/header") %>
    <!-- slider Area Start-->
    <div class="slider-area">
        <div class="single-slider hero-overly slider-height2 d-flex align-items-center" data-background="/assets/img/hero/contact_hero.jpg" >
            <div class="container">
                <div class="row ">
                    <div class="col-md-11 offset-xl-1 offset-lg-1 offset-md-1">
                        <div class="hero-caption">
                            <span>Book Room</span>
                            <h2>Book Room</h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- slider Area End-->

    <!-- ================ contact section start ================= -->
    <section class="contact-section">
            <div class="container">
    
                <div class="row">
                    <div class="col-8">
                        <h2 class="contact-title text-center">BOOK <%- room.name.toUpperCase() %> ROOM</h2>
                    </div>
                    <div class="col-lg-8 text-center">
                        <form class="form-contact contact_form">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <input class="form-control valid" name="room_name" id="room_name" type="text" value="<%- room.name %>" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <input class="form-control valid" name="price" id="price" type="number" value="$ <%- room.price %>" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <input class="form-control" name="customer_name" id="customer_name" type="text" value="<%- customer.name %>" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <input class="form-control" name="customer_email" id="customer_email" type="email" value="<%- customer.email %>" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <input class="form-control" name="number_of_days" id="number_of_days" type="text" value="<%- room.to.getDate() - room.from.getDate() %> Days =" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <input class="form-control" name="total_fee" id="total_fee" type="number" value="$ <%- (room.to.getDate() - room.from.getDate()) * room.price %>" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <input class="form-control" name="customer_contact" id="customer_contact" type="tel" value="<%- customer.contact %>" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <input class="form-control" name="room_id" id="room_id" type="tel" value="<%- room._id %>" readonly hidden>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mt-3">
                                <button type="button" class="button button-contactForm boxed-btn" onClick="makePayment()">Book Room</button>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-3 offset-lg-1">
                        <div class="media contact-info">
                            <span class="contact-info__icon"><i class="ti-home"></i></span>
                            <div class="media-body">
                                <h3>Hotel 5 | 10</h3>
                                <p>Confirm all information on the left/above before clicking on the book now button</p>
                            </div>
                        </div>
                        <!-- <div class="media contact-info">
                            <span class="contact-info__icon"><i class="ti-tablet"></i></span>
                            <div class="media-body">
                                <h3>+232 79 499920</h3>
                                <p>Mon to Fri 9am to 6pm</p>
                            </div>
                        </div>
                        <div class="media contact-info">
                            <span class="contact-info__icon"><i class="ti-email"></i></span>
                            <div class="media-body">
                                <h3>hotelsystem17@gmail.com</h3>
                                <p>Send us your query anytime!</p>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </section>
    <!-- ================ contact section end ================= -->
    
    <!-- action="/booking/<%- //room._id %>" method="POST" -->

      <script>
        function makePayment() {
            let total_fee = document.getElementById("total_fee");
            let room_name = document.getElementById("room_name");
            let customer_name = document.getElementById("customer_name");
            let customer_email = document.getElementById("customer_email");
            let room_id = document.getElementById("room_id");
            FlutterwaveCheckout({
            public_key: "FLWPUBK_TEST-87ddbe08f961a88f77f1a193a2326e63-X",
            tx_ref: "RX1",
            amount: `${total_fee.value}`,
            currency: "USD",
            country: "US",
            payment_options: " ",
            redirect_url: // specified redirect URL
              `/checkout/${room_id.value}`,
            meta: {
              consumer_id: 23,
              consumer_mac: "92a3-912ba-1192a",
            },
            customer: {
              email: `${customer_email.value}`,
              phone_number: `${customer_contact.value}`,
              name: "Hotel 5|10 Room Booking",
            },
            callback: function (data) {
              console.log(data);
            },
            onclose: function() {
              // close modal
            },
            customizations: {
              title: "Hotel 5 | 10",
              description: `Payment for: ${room_name.value}`,
              logo: "https://assets.piedpiper.com/logo.png",
            },
          });
        }
      </script>
    
<%- include ("partials/footer") %>
